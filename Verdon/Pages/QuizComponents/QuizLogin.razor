@page "/quiz/login"
@inject ApplicationDbContext _db
@inject NavigationManager router

<section id="cta" class="cta">
    <div class="container card" data-aos="zoom-out">
        <EditForm Model="@quiz" OnSubmit="@Post" class="card-body">
            <h3> QUIZ LOGIN</h3>
            @if(val != null)
            {
                <p>@val</p>
            }
            <div class="col-md-6 form-group">
                <InputText @bind-Value="@Id" type="text"  class="form-control"   placeholder="ENTER QUIZ ID" required />
            </div>
            <div class="col-md-6 form-group mt-3 mt-md-0">
                <InputText @bind-Value="@Pwd" type="password" class="form-control" placeholder="ENTER PASSWORD" required />
            </div>
            <div align="center" class="col-md-6 form-group mt-3 mt-md-0">
               <button class="btn btn-info w-50" type="submit">SUBMIT</button>
            </div>
        </EditForm>
    </div>
</section>
@code {
    public PrivateQuiz quiz = new();
    public string Id;
    public string Pwd;
    public string val;
    async Task Post()
    {
        try
        {
            var req = await _db.PrivateQuiz.Where(x => x.QuizId == int.Parse(Id)).SingleAsync();
            if(req.Password.Equals(Pwd))
            {
                router.NavigateTo("/instruction");
            }
            else
            {
                val = "Password does not match";
            }

        }catch(Exception e)
        {
            Console.WriteLine(e);
        }
    }

}
